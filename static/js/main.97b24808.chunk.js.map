{"version":3,"sources":["Components/FlightsBlock/FlightsBlock.module.css","redux/reducer.js","Components/FilterBlock/FilterBlock.jsx","Components/FlightsBlock/Flight/Flight.jsx","Components/FlightsBlock/FlightsBlock.jsx","img/logo.png","App.jsx","api/api.js","redux/store.js","index.js","Components/FlightsBlock/Flight/Flight.module.css","Components/FilterBlock/FilterBlock.module.css"],"names":["module","exports","reducerSlice","createSlice","name","initialState","flights","isLoading","filterItems","stops","selected","text","reducers","installFlights","state","action","payload","toggleLoading","toggleSelected","actions","FilterBlock","useSelector","className","s","container","heading","map","e","FilterItem","dispatch","useDispatch","item","onClick","type","checked","readOnly","Flight","mins","price","carrier","segments","flight","String","split","i","join","src","alt","description","date","slice","reverse","duration","Math","trunc","length","FlightsBlock","useState","sort","setSort","stopsSelectedFilterItems","filter","copyFlights","a","b","filteredFlights","some","buttons","selectedButton","App","useEffect","fetch","then","response","json","searchId","tickets","logo","roorReducer","combineReducers","reducer","store","configureStore","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.97b24808.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"buttons\":\"FlightsBlock_buttons__2yn72\",\"selectedButton\":\"FlightsBlock_selectedButton__ngAAH\"};","import { createSlice } from '@reduxjs/toolkit'\r\nimport { getFlights } from '../api/api'\r\n\r\nconst reducerSlice = createSlice({\r\n  name: 'todos',\r\n  initialState: {\r\n    flights: [],\r\n    isLoading: false,\r\n    filterItems: [\r\n      { stops: 0, selected: false, text: 'Без пересадок' },\r\n      { stops: 1, selected: false, text: '1 пересадка' },\r\n      { stops: 2, selected: false, text: '2 пересадки' },\r\n      { stops: 3, selected: false, text: '3 пересадки' },\r\n    ],\r\n  },\r\n  reducers: {\r\n    installFlights(state, action) {\r\n      state.flights = action.payload\r\n    },\r\n    toggleLoading(state, action) {\r\n      state.isLoading = action.payload\r\n    },\r\n    toggleSelected(state, action) {\r\n      state.filterItems[action.payload].selected = !state.filterItems[action.payload].selected\r\n    },\r\n  },\r\n})\r\n\r\nexport const getFlightsThunk = () => {\r\n  return async dispatch => {\r\n    dispatch(reducerSlice.actions.toggleLoading(true))\r\n    const flights = await getFlights()\r\n    await dispatch(reducerSlice.actions.installFlights(flights))\r\n    dispatch(reducerSlice.actions.toggleLoading(false))\r\n  }\r\n}\r\n\r\nexport const { installFlights, toggleSelected } = reducerSlice.actions\r\n\r\nexport default reducerSlice.reducer\r\n","import React from 'react'\r\nimport { useDispatch, useSelector } from 'react-redux'\r\nimport { toggleSelected } from '../../redux/reducer'\r\nimport s from './FilterBlock.module.css'\r\n\r\nexport const FilterBlock = () => {\r\n  const { filterItems } = useSelector(state => state.state)\r\n  return (\r\n    <div className={s.container}>\r\n      <h2 className={s.heading}>Количество пересадок</h2>\r\n      {filterItems.map(e => (\r\n        <FilterItem key={e.stops} text={e.text} stops={e.stops} selected={e.selected} />\r\n      ))}\r\n    </div>\r\n  )\r\n}\r\n\r\nconst FilterItem = ({ text, stops, selected }) => {\r\n  const dispatch = useDispatch()\r\n  return (\r\n    <div className={s.item} onClick={() => dispatch(toggleSelected(stops))}>\r\n      <input type='checkbox' checked={selected} readOnly />\r\n      <span>{text}</span>\r\n    </div>\r\n  )\r\n}\r\n","import React from 'react'\r\nimport s from './Flight.module.css'\r\n\r\nexport const Flight = ({ price, carrier, segments }) => {\r\n  function getTimeFromMins(mins) {\r\n    let hours = Math.trunc(mins / 60)\r\n    let minutes = mins % 60\r\n    return hours + 'ч. ' + minutes + 'м.'\r\n  }\r\n\r\n  return (\r\n    <div className={s.flight}>\r\n      <header>\r\n        <span className={s.price}>\r\n          {String(price)\r\n            .split('')\r\n            .map((e, i) => (i === 1 ? e + ' ' : e))\r\n            .join('') + ' Р'}\r\n        </span>\r\n        <img src={`//pics.avs.io/99/36/${carrier}.png`} alt='' />\r\n      </header>\r\n      <div className={s.description}>\r\n        <div className={s.item}>\r\n          <h6>Время и дата вылета </h6>\r\n          <h5>\r\n            {segments[0].date.slice(11, 16)} &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\r\n            {segments[0].date.slice(5, 10).split('-').reverse().join('.')}\r\n          </h5>\r\n        </div>\r\n        <div className={s.item}>\r\n          <h6>Время пути </h6>\r\n          <h5>{getTimeFromMins(segments[0].duration)}</h5>\r\n        </div>\r\n        <div className={s.item}>\r\n          <h6> Пересадки: {segments[0].stops.length} </h6>\r\n          <h5>{segments[0].stops.join(' ')}</h5>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n","import React, { useState } from 'react'\r\nimport s from './FlightsBlock.module.css'\r\nimport { Flight } from './Flight/Flight'\r\nimport { useSelector } from 'react-redux'\r\n\r\nexport const FlightsBlock = () => {\r\n  const [sort, setSort] = useState('Самый дешевый')\r\n  const { flights, isLoading, filterItems } = useSelector(state => state.state)\r\n\r\n  const stopsSelectedFilterItems = filterItems.filter(e => e.selected === true).map(e => e.stops)\r\n  let copyFlights = [...flights]\r\n\r\n  if (sort === 'Самый дешевый') {\r\n    copyFlights.sort((a, b) => {\r\n      if (a.price > b.price) {\r\n        return 1\r\n      }\r\n      if (a.price < b.price) {\r\n        return -1\r\n      }\r\n      return 0\r\n    })\r\n  } else if (sort === 'Самый быстрый') {\r\n    copyFlights.sort((a, b) => {\r\n      if (a.segments[0].duration > b.segments[0].duration) {\r\n        return 1\r\n      }\r\n      if (a.segments[0].duration < b.segments[0].duration) {\r\n        return -1\r\n      }\r\n      return 0\r\n    })\r\n  }\r\n\r\n  const filterFlights = () => {\r\n    if (stopsSelectedFilterItems.length) {\r\n      return copyFlights.map((flight, i) => {\r\n        return stopsSelectedFilterItems.some(e => e === flight.segments[0].stops.length) ? <Flight key={i} {...flight} /> : null\r\n      })\r\n    } else {\r\n      return copyFlights.map((flight, i) => {\r\n        return <Flight key={i} {...flight} />\r\n      })\r\n    }\r\n  }\r\n\r\n  const filteredFlights = filterFlights()\r\n\r\n  return (\r\n    <div>\r\n      <div className={s.buttons}>\r\n        <button className={sort === 'Самый дешевый' ? s.selectedButton : ''} onClick={() => setSort('Самый дешевый')}>\r\n          Самый дешевый\r\n        </button>\r\n        <button className={sort === 'Самый быстрый' ? s.selectedButton : ''} onClick={() => setSort('Самый быстрый')}>\r\n          Самый быстрый\r\n        </button>\r\n      </div>\r\n      {isLoading ? 'Loading...' : filteredFlights}\r\n    </div>\r\n  )\r\n}\r\n","export default __webpack_public_path__ + \"static/media/logo.371cc60f.png\";","import { useEffect } from 'react'\nimport { useDispatch } from 'react-redux'\nimport './App.css'\nimport { FilterBlock, FlightsBlock } from './Components'\nimport logo from './img/logo.png'\nimport { getFlightsThunk } from './redux/reducer'\n\nexport const App = () => {\n  const dispatch = useDispatch()\n  useEffect(() => {\n    dispatch(getFlightsThunk())\n  }, [dispatch])\n  return (\n    <>\n      <div className='logo'>\n        <img src={logo} alt='logo' />\n      </div>\n      <div className='container'>\n        <FilterBlock />\n        <FlightsBlock />\n      </div>\n    </>\n  )\n}\n","export const getFlights = () => {\r\n  return fetch('https://front-test.beta.aviasales.ru/search')\r\n    .then(response => response.json())\r\n    .then(json =>\r\n      fetch(`https://front-test.beta.aviasales.ru/tickets?searchId=${json.searchId}`).then(response =>\r\n        response.json().then(json => json.tickets.slice(0, 100))\r\n      )\r\n    )\r\n}\r\n","import { combineReducers, configureStore } from '@reduxjs/toolkit'\r\nimport reducer from './reducer'\r\n\r\nconst roorReducer = combineReducers({\r\n  state: reducer,\r\n})\r\n\r\nexport const store = configureStore({\r\n  reducer: roorReducer,\r\n})\r\n","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport './index.css'\nimport { App } from './App'\nimport { Provider } from 'react-redux'\nimport { store } from './redux/store'\n\nReactDOM.render(\n  <React.StrictMode>\n    <Provider store={store}>\n      <App />\n    </Provider>\n  </React.StrictMode>,\n  document.getElementById('root')\n)\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"flight\":\"Flight_flight__3avSV\",\"price\":\"Flight_price__33PXO\",\"description\":\"Flight_description__2MRPJ\",\"item\":\"Flight_item__1MfcR\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"FilterBlock_container__ZHGxJ\",\"heading\":\"FilterBlock_heading__PSGJU\",\"item\":\"FilterBlock_item__3AoO7\"};"],"sourceRoot":""}